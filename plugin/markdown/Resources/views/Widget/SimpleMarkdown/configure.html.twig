
{% form_theme form 'ClarolineCoreBundle::form_theme_no_label.html.twig' %}



{% block stylesheets %}


<link rel="stylesheet" href="/packages/editor.md/css/style.css" />
<link rel="stylesheet" href="/packages/editor.md/css/editormd.css" />
<link rel="shortcut icon" href="https://pandao.github.io/editor.md/favicon.ico" type="image/x-icon" />

{% endblock %}

{% block content %}

    <div id="layout">
     <div class="editormd" id="test-editormd">
           <textarea class="editormd-markdown-textarea" name="test-editormd-markdown-doc" id="md_markdown_textarea"></textarea>

            <form role="form"
                  class="form-horizontal widget-content-config-form"
                  action="{{ path('claro_simple_markdown_update_config', {'widget': config.getId()}) }}"
                  method="post"
                  novalidate
                  >

                <div class="panel-body md_markdown_element" style="display:none;">
                    {{ form_widget(form) | replace('/id=[^"]*"', '') | raw }}
                </div>
            </form>

        </div>
    </div>

{% endblock %}

{% block javascripts %}
     <script src="/packages/editor.md/editormd.min.js"></script>
    <script>
        $(".modal-dialog").width("100%");
       
        var mkVal=$(".md_markdown_element").find("textarea").eq(0).val();

        $('#md_markdown_textarea').val(mkVal);

         
        // var mkVal=$(".md_markdown_element").find("textarea").eq(0).val();

        $(function () {
            editormd("test-editormd", {
                width: "90%",
                height: 640,
                syncScrolling: "single",
                path: "/packages/editor.md/lib/",
		searchReplace : true,
		emoji : true,
                taskList : true,
                tocm: true,
                tex : true, 
                flowChart : true,
               	sequenceDiagram : true,
		htmlDecode : "style,script,iframe|on*",
		codeFold : true,
		imageUpload : true,
		imageFormats : ["jpg", "jpeg", "gif", "png", "bmp", "webp"],
		imageUploadURL : "/packages/editor.md/examples/php/upload.php"
            });
        });
        
      $(".btn-primary").on('click',function(){

       console.log("ddddddd");
        console.log($('#md_markdown_textarea').val());
       
	var tmpVal=$('#md_markdown_textarea').val();
         $(".md_markdown_element").find("textarea").eq(0).val(tmpVal);

         console.log($(".md_markdown_element").find("textarea").eq(0).val());
       
        $(".widget-content-config-form").submit();
       
       }); 

       $("#layout").parent().siblings(".form-horizontal").css("float","left");
       $("#layout").parent().siblings(".form-horizontal").css("width","100%");
       $("#layout").parent().siblings(".form-horizontal").children("#widget_instance_config_form").children("div").css("float","left");
       $("#layout").parent().siblings(".form-horizontal").children("#widget_instance_config_form").children("div").css("width","25%");
       $("#layout").parent().siblings(".form-horizontal").children("#widget_instance_config_form").css("width","100%");
       $("#layout").parent().siblings("hr").remove();
    </script>

{% endblock %}
